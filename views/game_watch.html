<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Artificial Intelligence based on the Minimax- and α-β-Pruning principles.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Connect 4</title>
    <link rel="stylesheet" href="css/game.css">
</head>

<body>
    <div id="container">
        <h3 id="status">Wating</h3>
        <div class="box-left">
            <div id="coin"></div>
            <table id="game_board" cellpadding="0"></table>

        </div>

        <div class="box-right">
            <div id="options">



            </div>

            <div id="debug">

            </div>
        </div>
    </div>
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/board.js"></script>
    <script src="js/connect-four-watch.js"></script>
    <script>
        window.game_info = {};
        window.onload = function () {
            $.ajax({
                url: "http://localhost:3000/watch_game/",
                method: 'post',
                xhrFields: {
                    withCredentials: true
                },
                data: {
                    game_id: localStorage.getItem("watch_game_id")
                },
                success: (response) => {
                    game_info = response.game_info;
                    start_review();
                }
            });
        }

        function start_review() {
            Start();
            var count = 0;
            setInterval(() => {
                Game.place(game_info.moves[count]);
                count++;
                if (game_info.state != "complete") {
                    $.ajax({
                        url: "http://localhost:3000/watch_game/",
                        method: 'post',
                        xhrFields: {
                            withCredentials: true
                        },
                        data: {
                            game_id: localStorage.getItem("watch_game_id")
                        },
                        success: (response) => {
                            game_info = response.game_info;
                        }
                    });
                }
            }, 2000);
        }
    </script>

</body>

</html>